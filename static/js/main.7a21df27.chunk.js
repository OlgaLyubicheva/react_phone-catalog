(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(39)},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),o=a.n(c),i=a(2),s=a(11),l=a(7),u=Object(n.createContext)({}),m=["https://www.ridus.ru/images/2018/12/14/856347/in_article_ac4d4b4b3b.jpg","https://images.product-test.ru/imageresizer/files/d5564816-b9a8-4e21-92f6-03e8f0611f23_600.jpg","https://bigpicture.ru/wp-content/uploads/2017/03/smartf2.jpg","http://www.medlinks.ru/images/art/all25/111308.jpg"],p=function e(){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],o=a[1],i=function(e){clearTimeout(l),o(e)},l=setTimeout(function(){o(c+1===m.length?0:c+1)},4e3);return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"slider"},r.a.createElement("div",{className:"slider__item"},r.a.createElement("img",{src:m[c],alt:"advertisement"})),r.a.createElement("div",{className:"slider__dots"},r.a.createElement(e.Dot,{slide:0,index:c,check:i}),r.a.createElement(e.Dot,{slide:1,index:c,check:i}),r.a.createElement(e.Dot,{slide:2,index:c,check:i}),r.a.createElement(e.Dot,{slide:3,index:c,check:i}))))};p.Dot=function(e){var t=e.slide,a=e.index,n=e.check;return r.a.createElement("input",{type:"radio",name:"slider",checked:a===t,onClick:function(){a!==t&&n(t)}})};var d=p,h=a(9),f=a(12),v=a(13),g=a(16),E=a(14),b=a(17),y=a(3),_=a.n(y),O=function(e){var t=e.history,a=Object(n.useContext)(u).setStorage,c=sessionStorage.buy&&sessionStorage.buy.split("&").map(function(e){return e.split("*")}),o=(c||[]).map(function(e){return e[1]*e[2]}).reduce(function(e,t){return e+t},0).toFixed(2);if(o>0){for(var s=(o=o.toString().split("")).length-3,l=s%3!==0?Math.floor(s/3):s/3-1,m=1;m<=l;m++)o[s-3*m]="`".concat(o[s-3*m]);o=o.join("")}else o="0.00";var p=function(e){var t=e.map(function(e){return e.join("*")}).join("&");sessionStorage.setItem("buy",t)},d=function(e){var t=c.filter(function(t){return t[0]!==e});sessionStorage.removeItem(e),0!==t.length?p(t):sessionStorage.removeItem("buy"),a(function(e){return e-1})};return r.a.createElement("div",{className:"basket"},r.a.createElement("ul",{className:"basket__list"},c?c.map(function(e,a){return r.a.createElement("li",{className:"basket__list-item"},r.a.createElement("div",{className:"basket__list-title"},r.a.createElement("span",null,"".concat(a+1,".  ")),r.a.createElement("img",{className:"basket__list-img",src:"./img/phones/".concat(e[0],".0.jpg"),alt:sessionStorage[e[0]]}),r.a.createElement(i.b,{to:"/phones/".concat(e[0]),className:""},sessionStorage[e[0]])),r.a.createElement("div",null,r.a.createElement("span",{className:"phone-card__cost"},e[2]),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){return function(e){var a=Object(h.a)(c),n=c.indexOf(e);+e[1]-1!==0?(a[n]=[e[0],+e[1]-1,e[2]],p(a),t.replace(t.location)):d(e[0])}(e)}},"-"),r.a.createElement("span",{className:"basket__count"},e[1]),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var a=Object(h.a)(c);a[c.indexOf(e)]=[e[0],+e[1]+1,e[2]],p(a),t.replace(t.location)}(e)}},"+"),r.a.createElement("button",{className:"basket__delete",type:"button",onClick:function(){return d(e[0])}},"x"))))}):r.a.createElement("div",{className:"basket__empty"},"Cart is empty")),r.a.createElement("div",{className:"basket__total"},r.a.createElement("span",null,"Total sum: "),o,r.a.createElement("div",{className:"pay-button"},"0.00"!==o&&r.a.createElement("button",{type:"button",className:"add-button"},"Pay"))))};O.Count=function(e){var t=e.countOfItem;return 0!==t&&r.a.createElement("div",{className:"header__basket-count"},t)},(O.AddButton=function(e){var t=e.phone;return r.a.createElement(u.Consumer,null,function(e){var a=e.setStorage;return r.a.createElement("button",{type:"button",disabled:sessionStorage.getItem(t.id)&&!0,className:"add-button",onClick:function(){return function(e,t,a,n){sessionStorage.getItem("buy")?sessionStorage.buy+="&".concat(e,"*1*").concat(a):sessionStorage.buy="".concat(e,"*1*").concat(a),sessionStorage.setItem(e,t),n(function(e){return e+1})}(t.id,t.name,999999.99,a)}},sessionStorage.getItem(t.id)?"In cart":"Buy")})}).propTypes={phone:_.a.shape({id:_.a.string,name:_.a.string}).isRequired};var j=O,w=function(e){var t=e.phone,a=e.url,n=e.view;return r.a.createElement("div",{className:"phone-card phone-card--".concat(n),key:t.id},r.a.createElement("div",{className:"phone-card__img"},r.a.createElement("img",{src:"./".concat(t.imageUrl),alt:""})),r.a.createElement("div",{className:"phone-card__info"},r.a.createElement(i.b,{to:a},t.name),r.a.createElement("p",null,t.snippet)),r.a.createElement("div",{className:"phone-card__buy"},r.a.createElement("div",{className:"phone-card__cost"},"999`999.99"),r.a.createElement(j.AddButton,{phone:t})))},N=a(15);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var S=Object(l.f)(function(e){var t=e.history,a=e.searchValues,n=t.location.pathname,c=function(e){var r=e.target,c=r.name,o=r.value,i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){Object(N.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a);if(o!==i[c]){i[c]=o;var s=Object.entries(i).filter(function(e){return""!==e[1]}).map(function(e){return"".concat(e[0],"=").concat(e[1])});t.push("".concat(n,"?").concat(encodeURI(s.join("&"))))}};return r.a.createElement("div",{className:"filter"},r.a.createElement("input",{className:"filter__query",id:"search-fild",type:"search",name:"query",placeholder:"Search",value:a.query,onChange:function(e){return c(e)}}),r.a.createElement("select",{className:"filter__sort",name:"sort",value:a.sort,onChange:function(e){return c(e)}},r.a.createElement("option",{value:""},"Sort by"),r.a.createElement("option",{value:"name*1"},"Name (a-z)"),r.a.createElement("option",{value:"name*-1"},"Name (z-a)"),r.a.createElement("option",{value:"age*1"},"Newest")))}),C=a(10),x=a.n(C),I=a(18),P="https://mate-academy.github.io/phone-catalogue-static/api",D=function(){var e=Object(I.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(I.a)(x.a.mark(function e(){var t,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(P,"/phones.json"),e.next=3,D(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(I.a)(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(P,"/phones/").concat(t,".json"),e.next=3,D(a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=e.split("*"),a=t[0],n=+t[1];switch(a){case"age":return function(e,t){return n*(e[a]-t[a])};case"name":return function(e,t){return n*e[a].localeCompare(t[a])};default:return function(e,t){return 0}}},F={card:"./img/ico/card.svg","card-active":"./img/ico/card_active.svg",list:"./img/ico/list.svg","list-active":"./img/ico/list_active.svg"},A=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[],viewCatalog:"card"},a.getFiltredPhones=function(e){var t=[],n=a.state.phones;return t=e.query?n.filter(function(t){return t.name.toLowerCase().includes(e.query)}):Object(h.a)(n),e.sort&&(t=Object(h.a)(t).sort(B(e.sort))),t},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;V().then(function(t){e.setState({phones:Object(h.a)(t)})})}},{key:"render",value:function(){var e=this,a=this.props.location.search,n=this.props.match.url,c={query:"",sort:""};if(a)for(var o=decodeURI(a).slice(1).split("&"),i=0;i<o.length;i+=1){var l=o[i].split("="),u=Object(s.a)(l,2),m=u[0],p=u[1];c[m]=p}var d=this.getFiltredPhones(c),h=this.state.viewCatalog;return r.a.createElement("div",{className:"phones-page"},r.a.createElement(S,{searchValues:c}),r.a.createElement("div",{className:"phones-page__view-catalog"},r.a.createElement(t.ViewButton,{vStyle:"card",current:h,setView:function(t){return e.setState({viewCatalog:t})}}),r.a.createElement(t.ViewButton,{vStyle:"list",current:h,setView:function(t){return e.setState({viewCatalog:t})}})),r.a.createElement("main",{className:"phone-catalog phone-catalog--".concat(h)},d.map(function(e){return r.a.createElement(w,{phone:e,url:"".concat(n,"/").concat(e.id),view:h})})))}}]),t}(r.a.Component);A.ViewButton=function(e){var t=e.vStyle,a=e.current,n=e.setView;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t},r.a.createElement("img",{src:a===t?F["".concat(t,"-active")]:F[t],alt:"View grid"})),r.a.createElement("input",{type:"radio",id:t,value:t,checked:a===t,onClick:function(){return a!==t?n(t):""}}))},A.ViewButton.propTypes={vStyle:_.a.string.isRequired,current:_.a.string.isRequired,setView:_.a.func.isRequired};var R=A,T=function(){return r.a.createElement("div",null,r.a.createElement("div",null,"404 Not Found"),r.a.createElement("div",null,"You may go to ",r.a.createElement(i.b,{to:"/"},"Home page")," and try find what you look for"))},z=function(e){var t=e.phone;return r.a.createElement("details",{className:"phone-details",open:!0},r.a.createElement("summary",null,r.a.createElement("h3",null,"Specification")),0!==t.length&&r.a.createElement("dl",{className:"phone-details__tabl"},[["android","Android"],["battery","Battery"],["camera","Camera"],["connectivity","Connectivity"],["storage","Storage"],["hardware","Hardware"],["sizeAndWeight","Size & Weight"]].map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("dt",null,r.a.createElement("b",null,e[1]),r.a.createElement("dd",null,Object.entries(t[e[0]]).map(function(e){return r.a.createElement("div",null,r.a.createElement("span",null,e[0]),r.a.createElement("div",{className:"dash"}),r.a.createElement("span",null,function(e){switch(typeof e){case"boolean":return e?"Yes":!e&&"No";case"object":return e.join(", ");default:return e}}(e[1])))}))))})))};function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach(function(t){Object(N.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var U=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={phone:[],mainImg:"",isError:""},a.changeImg=function(e){return a.setState({mainImg:e})},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.phoneId;q(t).then(function(t){e.setState({phone:H({},t),mainImg:t.images[0]})}).catch(function(t){e.setState({isError:t})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.phone,n=t.mainImg,c=t.isError;return r.a.createElement("div",{className:"phone-details-page"},c?r.a.createElement("div",null,"Sorry, we cannot find a page."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"phone-details-page__name"},r.a.createElement("h1",null,a.name)),r.a.createElement("div",{className:"phone-details-page__info"},r.a.createElement("div",{className:"phone-details-page__main-img"},r.a.createElement("img",{src:n,alt:"phone"})),r.a.createElement("div",{className:"phone-details-page__info-body"},r.a.createElement("div",{className:"phone-details-page__buy"},r.a.createElement("div",{className:"phone-card__cost"},"999`999.99"),r.a.createElement(j.AddButton,{phone:a})),r.a.createElement("p",null,a.description),r.a.createElement("div",{className:"phone-details-page__imges"},a.images&&a.images.map(function(t){return r.a.createElement("div",{className:"phone-details-page__img\n                                ".concat(n===t?"select":void 0)},r.a.createElement("img",{src:"./".concat(t),alt:"what the phone looks",onMouseOver:function(){return e.changeImg(t)}}))})))),r.a.createElement("div",{id:"details",className:"phone-details-page__details"},r.a.createElement(z,{phone:a}))))}}]),t}(r.a.Component),J=function(){var e=Object(n.useState)(function(){return sessionStorage.buy?sessionStorage.buy.split("&").length:0}),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("nav",{className:"header__nav"},r.a.createElement("ul",{className:"header__nav--list"},r.a.createElement("li",null,r.a.createElement(i.c,{to:"/",exact:!0},"Home")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/phones"},"Phones")))),r.a.createElement("div",{className:"header__basket"},r.a.createElement(i.c,{to:"/basket"},r.a.createElement("img",{src:"./img/ico/cart-icon.png",alt:"The buy basket"}))),r.a.createElement(j.Count,{countOfItem:a})),r.a.createElement("div",{className:"page"},r.a.createElement(u.Provider,{value:{setStorage:c}},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:d}),r.a.createElement(l.a,{path:"/phones/:phoneId",component:U}),r.a.createElement(l.a,{path:"/phones",component:R}),r.a.createElement(l.a,{path:"/basket",component:j}),r.a.createElement(l.a,{component:T})))),r.a.createElement("footer",{className:"footer"},r.a.createElement("p",null,"Liubicheva Olga"),r.a.createElement("p",null,"2019")))};a(38);o.a.render(r.a.createElement(i.a,null,r.a.createElement(J,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.7a21df27.chunk.js.map