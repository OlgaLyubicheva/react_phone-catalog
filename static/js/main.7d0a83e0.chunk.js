(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(45)},33:function(e,t,n){},36:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),l=n(2),s=n(14),i=n(7),u=Object(a.createContext)({}),m=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Home"))},p=n(8),h=n(11),f=n(12),d=n(15),E=n(13),v=n(17),g=(n(33),n(6)),b=n.n(g),y=(n(36),function(e){var t=e.history,n=Object(a.useContext)(u).setStorage,c=sessionStorage.buy&&sessionStorage.buy.split("&").map(function(e){return e.split("*")}),o=function(e){var t=e.map(function(e){return e.join("*")}).join("&");sessionStorage.setItem("buy",t)},s=function(e){var t=c.filter(function(t){return t[0]!==e});sessionStorage.removeItem(e),0!==t.length?o(t):sessionStorage.removeItem("buy"),n(function(e){return e-1})};return r.a.createElement("div",{className:"basket"},r.a.createElement("ul",{className:"basket__list"},c?c.map(function(e,n){return r.a.createElement("li",{className:"basket__list--item"},r.a.createElement("div",null,r.a.createElement("span",null,"".concat(n+1,".  ")),r.a.createElement(l.b,{to:"/phones/".concat(e[0]),className:""},sessionStorage[e[0]])),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){return function(e){var n=Object(p.a)(c),a=c.indexOf(e);+e[1]-1!==0?(n[a]=[e[0],+e[1]-1],o(n),t.replace(t.location)):s(e[0])}(e)}},"-"),r.a.createElement("input",{className:"basket__count",value:e[1]}),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var n=Object(p.a)(c);n[c.indexOf(e)]=[e[0],+e[1]+1],o(n),t.replace(t.location)}(e)}},"+"),r.a.createElement("button",{className:"basket__delete",type:"button",onClick:function(){return s(e[0])}},"x")))}):r.a.createElement("div",{className:"basket__empty"},"Cart is empty")))});y.Count=function(e){var t=e.countOfItem;return 0!==t&&r.a.createElement("div",{className:"header__basket--count"},t)},(y.AddButton=function(e){var t=e.phone;return r.a.createElement(u.Consumer,null,function(e){var n=e.setStorage;return r.a.createElement("button",{type:"button",disabled:sessionStorage.getItem(t.id)&&!0,className:"phone-catalog__phone--buy",onClick:function(){return function(e,t,n){sessionStorage.getItem("buy")?sessionStorage.buy+="&".concat(e,"*1"):sessionStorage.buy="".concat(e,"*1"),sessionStorage.setItem(e,t),n(function(e){return e+1})}(t.id,t.name,n)}},sessionStorage.getItem(t.id)?"Added to cart":"Buy")})}).propTypes={phone:b.a.shape({id:b.a.string,name:b.a.string}).isRequired};var _=y,j=Object(i.f)(function(e){var t=e.phones,n=e.match.url;return r.a.createElement("main",{className:"phone-catalog"},t.map(function(e){return r.a.createElement("div",{className:"phone-catalog__phone",key:e.id},r.a.createElement("div",{className:"phone-catalog__phone--img"},r.a.createElement("img",{src:"./".concat(e.imageUrl),alt:""})),r.a.createElement("div",{className:"phone-catalog__phone--info"},r.a.createElement(l.b,{to:"".concat(n,"/").concat(e.id)},e.name),r.a.createElement("p",null,e.snippet)),r.a.createElement(_.AddButton,{phone:e}))}))}),N=n(16),O=(n(39),Object(i.f)(function(e){var t=e.history,n=e.searchValues,a=t.location.pathname,c=function(e){var r=e.target,c=r.name,o=r.value,l=Object(N.a)({},n);if(o!==l[c]){l[c]=o;var s=Object.entries(l).filter(function(e){return""!==e[1]}).map(function(e){return"".concat(e[0],"=").concat(e[1])});t.push("".concat(a,"?").concat(encodeURI(s.join("&"))))}};return r.a.createElement("div",{className:"filter"},r.a.createElement("input",{className:"filter__query",type:"search",name:"query",value:n.query,onChange:function(e){return c(e)}}),r.a.createElement("select",{className:"filter__sort",name:"sort",value:n.sort,onChange:function(e){return c(e)}},r.a.createElement("option",{value:""},"Sort by"),r.a.createElement("option",{value:"name*1"},"Name (a-z)"),r.a.createElement("option",{value:"name*-1"},"Name (z-a)"),r.a.createElement("option",{value:"age*1"},"Newest")))})),k=n(9),S=n.n(k),w=n(18),I="https://mate-academy.github.io/phone-catalogue-static/api",C=function(){var e=Object(w.a)(S.a.mark(function e(t){var n,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(w.a)(S.a.mark(function e(){var t,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(I,"/phones.json"),e.next=3,C(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(w.a)(S.a.mark(function e(t){var n,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(I,"/phones/").concat(t,".json"),e.next=3,C(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A=(n(41),function(e){var t=e.split("*"),n=t[0],a=+t[1];switch(n){case"age":return function(e,t){return a*(e[n]-t[n])};case"name":return function(e,t){return a*e[n].localeCompare(t[n])};default:return function(e,t){return 0}}}),F=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[]},n.getFiltredPhones=function(e){var t=[],a=n.state.phones;return t=e.query?a.filter(function(t){return t.name.toLowerCase().includes(e.query)}):Object(p.a)(a),e.sort&&(t=Object(p.a)(t).sort(A(e.sort))),t},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;x().then(function(t){e.setState({phones:Object(p.a)(t)})})}},{key:"render",value:function(){var e=this.props.location.search,t={query:"",sort:""};if(e)for(var n=decodeURI(e).slice(1).split("&"),a=0;a<n.length;a+=1){var c=n[a].split("="),o=Object(s.a)(c,2),l=o[0],i=o[1];t[l]=i}var u=this.getFiltredPhones(t);return r.a.createElement("div",{className:"phones-page"},r.a.createElement(O,{searchValues:t}),r.a.createElement("div",null,r.a.createElement(j,{phones:u})))}}]),t}(r.a.Component),B=function(){return r.a.createElement("div",null,r.a.createElement("div",null,"404 Not Found"),r.a.createElement("div",null,"You may go to ",r.a.createElement(l.b,{to:"/"},"Home page")," and try find what you look for"))},P=(n(42),function(e){var t=e.phone;return r.a.createElement("div",{className:"phone-details"},r.a.createElement("h3",null,"Specification"),0!==t.length&&r.a.createElement("table",{className:"phone-details__tabl"},["android","battery","camera","connectivity","storage","hardware","sizeAndWeight"].map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{className:"phone-details__tabl--property",colSpan:"2"},e),Object.entries(t[e]).map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e[0]),r.a.createElement("td",null,function(e){switch(typeof e){case"boolean":return e?"Yes":!e&&"No";case"object":return e.join(", ");default:return e}}(e[1])))}))})))}),z=(n(43),function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={phone:[],mainImg:"",isError:""},n.changeImg=function(e){return n.setState({mainImg:e})},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.phoneId;q(t).then(function(t){e.setState({phone:Object(N.a)({},t),mainImg:t.images[0]})}).catch(function(t){e.setState({isError:t})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.phone,a=t.mainImg,c=t.isError;return r.a.createElement("div",{className:"phone-details-page"},c?r.a.createElement("div",null,"Sorry, we cannot find a page."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"phone-details-page__main-img"},r.a.createElement("img",{src:a,alt:"phone"})),r.a.createElement("div",{className:"phone-details-page__info"},r.a.createElement("div",{className:"phone-details-page__info--name"},r.a.createElement("h1",null,n.name),r.a.createElement(_.AddButton,{phone:n})),r.a.createElement("p",null,n.description),r.a.createElement("div",{className:"phone-details-page__info--imges"},n.images&&n.images.map(function(t){return r.a.createElement("div",{className:"phone-details-page__info--img\n                              ".concat(a===t?"select":void 0)},r.a.createElement("img",{src:"./".concat(t),alt:"what the phone looks",onClick:function(){return e.changeImg(t)}}))}))),r.a.createElement("div",{id:"details",className:"phone-details-page__details"},r.a.createElement(P,{phone:n}))))}}]),t}(r.a.Component)),H=(n(44),function(){var e=Object(a.useState)(function(){return sessionStorage.buy?sessionStorage.buy.split("&").length:0}),t=Object(s.a)(e,2),n=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("nav",{className:"header__nav"},r.a.createElement("ul",{className:"header__nav--list"},r.a.createElement("li",null,r.a.createElement(l.c,{to:"/",exact:!0},"Home")),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/phones"},"Phones")))),r.a.createElement("div",{className:"header__basket"},r.a.createElement(l.c,{to:"/basket"},r.a.createElement("img",{src:"./img/ico/cart-icon.png",alt:"The buy basket"}))),r.a.createElement(_.Count,{countOfItem:n})),r.a.createElement("div",null,r.a.createElement(u.Provider,{value:{setStorage:c}},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:m}),r.a.createElement(i.a,{path:"/phones/:phoneId",component:z}),r.a.createElement(i.a,{path:"/phones",component:F}),r.a.createElement(i.a,{path:"/basket",component:_}),r.a.createElement(i.a,{component:B})))))});o.a.render(r.a.createElement(l.a,null,r.a.createElement(H,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.7d0a83e0.chunk.js.map