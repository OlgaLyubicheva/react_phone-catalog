(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(45)},33:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),o=a.n(c),l=a(2),i=a(6),s=function(){return r.a.createElement(r.a.Fragment,null,0!==localStorage.length&&r.a.createElement("div",{className:"header__basket--count"},0!==localStorage.length&&localStorage.length-1),r.a.createElement("h1",null,"Home"))},u=a(27),m=a(7),p=a(11),h=a(12),g=a(14),f=a(13),d=a(15),v=(a(33),Object(i.f)(function(e){var t=e.phones,a=e.match,n=e.history,c=a.url;return r.a.createElement("main",{className:"phone-catalog"},0!==localStorage.length&&r.a.createElement("div",{className:"header__basket--count"},0!==localStorage.length&&localStorage.length-1),t.map(function(e){return r.a.createElement("div",{className:"phone-catalog__phone",key:e.id},r.a.createElement("div",{className:"phone-catalog__phone--img"},r.a.createElement("img",{src:"./".concat(e.imageUrl),alt:""})),r.a.createElement("div",{className:"phone-catalog__phone--info"},r.a.createElement(l.b,{to:"".concat(c,"/").concat(e.id)},e.name),r.a.createElement("p",null,e.snippet)),r.a.createElement("button",{type:"button",disabled:localStorage.getItem(e.id)&&!0,className:"phone-catalog__phone--buy",onClick:function(){return t=e.id,a=e.name,localStorage.getItem("buy")?localStorage.buy+="&".concat(t,"*1"):localStorage.buy="".concat(t,"*1"),localStorage.setItem(t,a),void n.replace(n.location);var t,a}},localStorage.getItem(e.id)?"Added to basket":"Buy"))}))})),E=a(16),b=(a(38),Object(i.f)(function(e){var t=e.history,a=e.searchValues,n=t.location.pathname,c=function(e){var r=e.target,c=r.name,o=r.value,l=Object(E.a)({},a);if(o!==l[c]){l[c]=o;var i=Object.entries(l).filter(function(e){return""!==e[1]}).map(function(e){return"".concat(e[0],"=").concat(e[1])});t.push("".concat(n,"?").concat(i.join("&")))}};return r.a.createElement("div",{className:"filter"},r.a.createElement("input",{className:"filter__query",type:"search",name:"query",value:a.query,onChange:function(e){return c(e)}}),r.a.createElement("select",{className:"filter__sort",name:"sort",value:a.sort,onChange:function(e){return c(e)}},r.a.createElement("option",{value:""},"Sort by"),r.a.createElement("option",{value:"name*1"},"Name (a-z)"),r.a.createElement("option",{value:"name*-1"},"Name (z-a)"),r.a.createElement("option",{value:"age*1"},"Newest")))})),y=a(8),_=a.n(y),N=a(17),S="https://mate-academy.github.io/phone-catalogue-static/api",j=function(){var e=Object(N.a)(_.a.mark(function e(t){var a,n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(N.a)(_.a.mark(function e(){var t,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(S,"/phones.json"),e.next=3,j(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(N.a)(_.a.mark(function e(t){var a,n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(S,"/phones/").concat(t,".json"),e.next=3,j(a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=(a(40),function(e){var t=e.split("*"),a=t[0],n=+t[1];switch(a){case"age":return function(e,t){return n*(e[a]-t[a])};case"name":return function(e,t){return n*e[a].localeCompare(t[a])};default:return function(e,t){return 0}}}),w=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[]},a.getFiltredPhones=function(e){var t=[],n=a.state.phones;return t=e.query?n.filter(function(t){return t.name.toLowerCase().includes(e.query)}):Object(m.a)(n),e.sort&&(t=Object(m.a)(t).sort(I(e.sort))),t},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;k().then(function(t){e.setState({phones:Object(m.a)(t)})})}},{key:"render",value:function(){var e=this.props.location.search,t={query:"",sort:""};if(e)for(var a=e.slice(1).split("&"),n=0;n<a.length;n+=1){var c=a[n].split("="),o=Object(u.a)(c,2),l=o[0],i=o[1];t[l]=i}var s=this.getFiltredPhones(t);return r.a.createElement("div",{className:"phones-page"},r.a.createElement(b,{searchValues:t}),r.a.createElement("div",null,r.a.createElement(v,{phones:s})))}}]),t}(r.a.Component),x=function(){return r.a.createElement("div",null,r.a.createElement("div",null,"404 Not Found"),r.a.createElement("div",null,"You may go to ",r.a.createElement(l.b,{to:"/"},"Home page")," and try find what you look for"))},C=(a(41),function(){return r.a.createElement("div",null,"Phone Details")}),q=(a(42),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={phone:[],mainImg:"",isError:""},a.changeImg=function(e){return a.setState({mainImg:e})},a.addToBasket=function(e,t){var n=a.props.history;localStorage.getItem("buy")?localStorage.buy+="&".concat(e,"*1"):localStorage.buy="".concat(e,"*1"),localStorage.setItem(e,t),n.replace(n.location)},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.phoneId;O(t).then(function(t){e.setState({phone:Object(E.a)({},t),mainImg:t.images[0]})}).catch(function(t){e.setState({isError:t})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.phone,n=t.mainImg,c=t.isError;return r.a.createElement("div",{className:"phone-details-page"},0!==localStorage.length&&r.a.createElement("div",{className:"header__basket--count"},0!==localStorage.length&&localStorage.length-1),c?r.a.createElement("div",null,"Sorry, we cannot find a page."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"phone-details-page__main-img"},r.a.createElement("img",{src:n,alt:""})),r.a.createElement("div",{className:"phone-details-page__info"},r.a.createElement("div",{className:"phone-details-page__info--name"},r.a.createElement("h1",null,a.name),r.a.createElement("button",{type:"button",disabled:localStorage.getItem(a.id)&&!0,className:"phone-catalog__phone--buy",onClick:function(){return e.addToBasket(a.id,a.name)}},localStorage.getItem(a.id)?"Added to basket":"Buy")),r.a.createElement("p",null,a.description),r.a.createElement("div",{className:"phone-details-page__info--imges"},a.images&&a.images.map(function(t){return r.a.createElement("div",{className:"phone-details-page__info--img\n                              ".concat(n===t?"select":void 0)},r.a.createElement("img",{src:"./".concat(t),alt:"",onClick:function(){return e.changeImg(t)}}))}))),r.a.createElement("div",{id:"details",className:"phone-details-page__details"},r.a.createElement(C,null))))}}]),t}(r.a.Component)),B=(a(43),function(e){var t=e.history,a=localStorage.buy&&localStorage.buy.split("&").map(function(e){return e.split("*")}),n=function(e){var n=a.filter(function(t){return t[0]!==e});localStorage.removeItem(e),0!==n.length?(n=n.map(function(e){return e.join("*")}).join("&"),localStorage.setItem("buy",n)):localStorage.removeItem("buy"),t.replace(t.location)};return r.a.createElement("div",{className:"basket"},r.a.createElement("ul",{className:"basket__list"},a?a.map(function(e,c){return r.a.createElement("li",{className:"basket__list--item"},r.a.createElement("div",null,r.a.createElement("span",null,"".concat(c+1,".  ")),r.a.createElement(l.b,{to:"/phones/".concat(e[0]),className:""},localStorage[e[0]])),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){return function(e){var r=Object(m.a)(a),c=a.indexOf(e);+e[1]-1!==0?(r[c]=[e[0],+e[1]-1],r=r.map(function(e){return e.join("*")}).join("&"),localStorage.setItem("buy",r),t.replace(t.location)):n(e[0])}(e)}},"-"),r.a.createElement("input",{className:"basket__count",value:e[1]}),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var n=Object(m.a)(a);n[a.indexOf(e)]=[e[0],+e[1]+1],n=n.map(function(e){return e.join("*")}).join("&"),localStorage.setItem("buy",n),t.replace(t.location)}(e)}},"+"),r.a.createElement("button",{className:"basket__delete",type:"button",onClick:function(){return n(e[0])}},"x")))}):r.a.createElement("div",{className:"basket__empty"},"Basket is empty")))}),F=(a(44),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("nav",{className:"header__nav"},r.a.createElement("ul",{className:"header__nav--list"},r.a.createElement("li",null,r.a.createElement(l.c,{to:"/",exact:!0,activeClassName:"active"},"Home")),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/phones"},"Phones")))),r.a.createElement("div",{className:"header__basket"},r.a.createElement(l.c,{to:"/basket"},r.a.createElement("img",{src:"./img/ico/cart-icon.png",alt:""})))),r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:s}),r.a.createElement(i.a,{path:"/phones/:phoneId",component:q}),r.a.createElement(i.a,{path:"/phones",component:w}),r.a.createElement(i.a,{path:"/basket",component:B}),r.a.createElement(i.a,{component:x}))))});o.a.render(r.a.createElement(l.a,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.53563643.chunk.js.map